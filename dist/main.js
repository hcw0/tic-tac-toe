(()=>{"use strict";const e=(e,t)=>{const r=e;let n=t;return{getSign:()=>r,getTurn:()=>n,toggleTurn:()=>{n=!n},setTurn:e=>n=e}},t={board:document.querySelector(".board"),squares:[[document.querySelector(".square-1-1"),document.querySelector(".square-1-2"),document.querySelector(".square-1-3")],[document.querySelector(".square-2-1"),document.querySelector(".square-2-2"),document.querySelector(".square-2-3")],[document.querySelector(".square-3-1"),document.querySelector(".square-3-2"),document.querySelector(".square-3-3")]],turnDisplay:document.querySelector(".turn-display"),square:document.querySelectorAll(".square"),resetButton:document.querySelector(".reset-button")},r=(()=>{let r=[[0,0,0],[0,0,0],[0,0,0]],n=0,u=!1;const o=e("X",!0),l=e("O",!1),s=(e,t)=>!(e>3||e<0||t>3||t<0||0!=r[e][t]),c=()=>o.getTurn()?(o.toggleTurn(),l.toggleTurn(),t.turnDisplay.textContent=l.getSign()+"'s turn",o):(l.toggleTurn(),o.toggleTurn(),t.turnDisplay.textContent=o.getSign()+"'s turn",l),a=()=>n>=9,i=()=>{for(let e=0;e<r.length;e++){let t=r[e][0],n=1;if(0!=t)for(let u=1;u<r[0].length;u++)if(r[e][u]==t&&(n++,3==n))return r[e][u]}return""},g=()=>{for(let e=0;e<r[0].length;e++){let t=r[0][e],n=1;if(0!=t)for(let u=1;u<r.length;u++)if(r[u][e]==t&&(n++,3==n))return r[u][e]}return""},q=()=>{let e=r[0][0],t=1;for(let n=1;n<r.length;n++)if(0!=e&&r[n][n]==e&&(t++,3==t))return r[n][n];e=r[2][0],t=1;for(let n=r.length-2,u=r.length-2;u<r.length;n--,u++)if(0!=e&&r[n][u]==e&&(t++,3==t))return r[n][u];return""},d=()=>{let e=i(),t=g(),r=q();return""==e&&""==t&&""==r&&a()?"Tie":"X"==e||"X"==t||"X"==r?o:("O"==e||"O"==t||"O"==r)&&l},y=e=>{r=e},S=e=>{n=e};return{makeMove:(e,o)=>{if(a());else if(u);else if(s(e,o)){let l=c();if(r[e][o]=l.getSign(),t.squares[e][o].textContent=l.getSign(),n++,0!=d()){u=!0;let e=d();t.turnDisplay.textContent="Tie"==e?"Tie!":"Player "+e.getSign()+" wins"}}},isMoveValid:s,isGameDone:a,checkWinner:d,playerTurn:c,resetGame:()=>{t.square.forEach((e=>{e.textContent=""})),y([[0,0,0],[0,0,0],[0,0,0]]),S(0),t.turnDisplay.textContent="X's turn",o.setTurn(!0),l.setTurn(!1),u=!1},setBoard:y,getBoard:()=>r,setOccupiedSquares:S,getOccupiedSquares:()=>n,rowCheck:i,diagCheck:q,colCheck:g}})();(()=>{for(let e=0;e<t.squares.length;e++)for(let n=0;n<t.squares[0].length;n++)t.squares[e][n].addEventListener("click",(()=>{r.makeMove(e,n)}));t.resetButton.addEventListener("click",r.resetGame)})()})();